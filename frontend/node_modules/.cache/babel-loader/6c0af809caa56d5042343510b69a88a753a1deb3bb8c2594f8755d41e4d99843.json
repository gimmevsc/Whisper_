{"ast":null,"code":"var _jsxFileName = \"/Users/bohdanprokopchuk/Desktop/db/frontend/src/pages/register/confirmation/Confirmation.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport logo from \"../../../assets/logo.svg\";\nimport style from \"../register.module.scss\";\nimport Input from \"../../../components/Input\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport config from '../../../config.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Confirmation() {\n  _s();\n  const navigate = useNavigate();\n  const labels = [[\"Confirmation code\", 'number']];\n  const [fields, setFields] = useState(['']);\n  const [pressed, setPressed] = useState([false]);\n  const [seconds, setSeconds] = useState(30);\n  const isCounter = useRef(false);\n  const interval = useRef(null);\n  function confirmHandler() {\n    const url = `${config.url}/register/confirmation`;\n    const EMAIL = sessionStorage.getItem('email');\n    const data = {\n      \"code\": fields[0],\n      \"email_address\": EMAIL\n    };\n    axios.post(url, data).then(res => {\n      console.log(res.data);\n      navigate('/login');\n    }).catch(err => console.log(err));\n  }\n  function focusHandler(i) {\n    setPressed(prev => {\n      prev[i] = true;\n      return prev.slice(0);\n    });\n  }\n  function resendHandler(seconds) {\n    if (!isCounter.current) {\n      const url = `${config.url}/register/confirmation/resend?email_address=${sessionStorage.getItem(\"email\")}`;\n      isCounter.current = true;\n      let temp = seconds;\n      interval.current = setInterval(() => {\n        setSeconds(prevSeconds => prevSeconds - 1);\n        temp--;\n        console.log(temp);\n        if (temp == 0) {\n          clearInterval(interval.current);\n          isCounter.current = false;\n          setSeconds(30);\n        }\n      }, 1000);\n      axios.get(url).then(res => console.log(res.data)).catch(err => console.log(err));\n    }\n  }\n  function onClickOutsideHandler(i) {\n    if (fields[i].length == 0 && pressed[i]) setPressed(prev => {\n      prev[i] = false;\n      return prev.slice(0);\n    });\n  }\n  useEffect(() => {\n    // Cleanup interval on component unmount\n    return () => clearInterval(interval.current);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.register,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"\",\n      className: style.logo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: style.title,\n      children: \"Get Started Now!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.create_text,\n      children: \"Create your account here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.inputs,\n      children: labels.map((n, i) => /*#__PURE__*/_jsxDEV(Input, {\n        style: style,\n        index: i,\n        isAnimation: false,\n        c: [fields, setFields],\n        field: fields,\n        pressed: pressed,\n        name: n[0],\n        inputType: n[1],\n        focusHandler: () => focusHandler(i),\n        onClickOutside: () => onClickOutsideHandler(i)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style[\"button-container\"],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${style['confirmation-buttons']}`,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${style['confirmation-resend-btn']} ${style['confirmation-btn']} ${isCounter.current ? style['counter-btn'] : \"\"}`,\n          onClick: () => {\n            resendHandler(seconds);\n          },\n          children: isCounter.current ? seconds : 'Resend'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${style['confirmation-btn']} ${style['confirmation-submit-btn']}`,\n          onClick: confirmHandler,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n_s(Confirmation, \"ePc2wZPKa7DVCBTPW8A4iWrFp7I=\", false, function () {\n  return [useNavigate];\n});\n_c = Confirmation;\nexport default Confirmation;\nvar _c;\n$RefreshReg$(_c, \"Confirmation\");","map":{"version":3,"names":["useEffect","useRef","useState","logo","style","Input","Link","useNavigate","axios","config","jsxDEV","_jsxDEV","Confirmation","_s","navigate","labels","fields","setFields","pressed","setPressed","seconds","setSeconds","isCounter","interval","confirmHandler","url","EMAIL","sessionStorage","getItem","data","post","then","res","console","log","catch","err","focusHandler","i","prev","slice","resendHandler","current","temp","setInterval","prevSeconds","clearInterval","get","onClickOutsideHandler","length","className","register","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","title","create_text","inputs","map","n","index","isAnimation","c","field","name","inputType","onClickOutside","onClick","_c","$RefreshReg$"],"sources":["/Users/bohdanprokopchuk/Desktop/db/frontend/src/pages/register/confirmation/Confirmation.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport logo from \"../../../assets/logo.svg\"\nimport style from \"../register.module.scss\"\nimport Input from \"../../../components/Input\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nimport axios from \"axios\";\nimport config from '../../../config.json'\nfunction Confirmation() {\n    const navigate = useNavigate()\n    const labels = [[\"Confirmation code\", 'number']];\n    const [fields, setFields] = useState([''])\n    const [pressed, setPressed] = useState([false])\n    const [seconds,setSeconds] = useState(30)\n    const isCounter = useRef(false)\n    const interval = useRef(null)\n    function confirmHandler() {\n        const url = `${config.url}/register/confirmation`;\n        const EMAIL = sessionStorage.getItem('email')\n        const data = {\n            \"code\": fields[0],\n            \"email_address\": EMAIL\n        }\n        axios.post(url, data).then(res => {\n            console.log(res.data)\n            navigate('/login')\n        }).catch(err => console.log(err))\n    }\n    function focusHandler(i) {\n\n        setPressed(prev => {\n            prev[i] = true\n            return prev.slice(0)\n        });\n    }\n    function resendHandler(seconds) {\n\n        if(!isCounter.current){\n            const url = `${config.url}/register/confirmation/resend?email_address=${sessionStorage.getItem(\"email\")}`\n            isCounter.current = true\n            let temp = seconds\n            interval.current = setInterval(() => {\n                setSeconds(prevSeconds => prevSeconds - 1);\n                temp--;\n                console.log(temp)\n                if(temp==0){\n                    clearInterval(interval.current)\n                    isCounter.current = false;\n                    setSeconds(30);\n                }\n            }, 1000);\n            axios.get(url).then(res => console.log(res.data)).catch(err => console.log(err))\n        }\n    }\n    function onClickOutsideHandler(i) {\n        if (fields[i].length == 0 && pressed[i]) setPressed(prev => { prev[i] = false; return prev.slice(0); });\n    }\n\n    useEffect(()=>{\n        \n        // Cleanup interval on component unmount\n        return () => clearInterval(interval.current);\n    },[])\n\n    return (\n        <div className={style.register}>\n            <img src={logo} alt=\"\" className={style.logo} />\n\n            <h1 className={style.title}>Get Started Now!</h1>\n            <div className={style.create_text}>Create your account here</div>\n            <div className={style.inputs}>\n                {\n                    labels.map((n, i) =>\n                        <Input key={i} style={style} index={i} isAnimation={false} c={[fields, setFields]} field={fields} pressed={pressed} name={n[0]} inputType={n[1]} focusHandler={() => focusHandler(i)} onClickOutside={() => onClickOutsideHandler(i)} />\n                    )\n                }\n            </div>\n            <div className={style[\"button-container\"]}>\n                <div className={`${style['confirmation-buttons']}`}>\n                    <button className={`${style['confirmation-resend-btn']} ${style['confirmation-btn']} ${isCounter.current? style['counter-btn']:\"\"}`} onClick={()=>{resendHandler(seconds)}}>\n                        {\n                            isCounter.current? seconds: 'Resend'\n                        }\n                    </button>\n                    <button className={`${style['confirmation-btn']} ${style['confirmation-submit-btn']}`} onClick={confirmHandler}>\n                        Submit\n                    </button>\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default Confirmation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}