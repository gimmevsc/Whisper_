{"ast":null,"code":"var _jsxFileName = \"/Users/bohdanprokopchuk/Desktop/db/frontend/src/pages/login/Login.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport Cookies from 'js-cookie';\nimport logo from \"../../assets/logo.svg\";\nimport style from \"./login.module.scss\";\nimport Input from \"../../components/Input\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport config from \"../../config.json\";\nimport decodeToken from '../../utils/decodeToken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const navigate = useNavigate();\n  const [pressed, setPressed] = useState([false, false, false]);\n  const [isAnimation, setIsAnimation] = useState(false);\n  const [fields, setFields] = useState(['', '']);\n  const labels = [[\"Username or email\", 'text'], [\"Password\", 'password']];\n  const [error, setError] = useState('');\n  function focusHandler(i) {\n    setPressed(prev => {\n      prev[i] = true;\n      return prev.slice(0);\n    });\n  }\n  function loginHandler() {\n    // const url = `http://${config.HOST}:${config.PORT}`\n    const url = `${config.url}/login`;\n    const data = {\n      \"username\": fields[0],\n      \"password\": fields[1]\n    };\n    axios.post(url, data).then(res => {\n      Cookies.set('token', res.data.token); // Expires in 30 days\n\n      const id = decodeToken(Cookies.get('token')).user_id;\n      navigate(`/chatroom/${id}`);\n    }).catch(err => {\n      console.log(err.response.data.message);\n      setError(err.response.data.message);\n    });\n  }\n  function toRegisterHandler() {\n    setIsAnimation(true);\n    setTimeout(() => {\n      navigate(\"/register\");\n    }, 255);\n  }\n  function onClickOutsideHandler(i) {\n    if (fields[i].length == 0 && pressed[i]) setPressed(prev => {\n      prev[i] = false;\n      return prev.slice(0);\n    });\n  }\n  useEffect(() => {}, [fields, pressed]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.login,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"\",\n      className: style.logo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: style.title,\n      children: \"Welcome back!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.create_text,\n      children: \"Create an account or Log in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.inputs,\n      onKeyDown: e => {\n        if (e.key === \"Enter\") loginHandler();\n      },\n      children: [labels.map((n, i) => /*#__PURE__*/_jsxDEV(Input, {\n        style: style,\n        index: i,\n        c: [fields, setFields],\n        isAnimation: isAnimation && i == 1,\n        field: fields,\n        pressed: pressed,\n        name: n[0],\n        inputType: n[1],\n        focusHandler: () => focusHandler(i),\n        onClickOutside: () => onClickOutsideHandler(i)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${style.input_wrapper} ${style.animation_input} ${isAnimation ? style.opacity_input : \"\"}`,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Username\",\n          className: style.input\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${style.forgot_password} ${isAnimation ? style.forgot_password_animation : \"\"}`,\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/reset\",\n          children: \"Forgot your password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style[\"errors\"],\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${style.buttons} ${isAnimation ? style.buttons_animation : \"\"}`,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${style.register_btn} ${isAnimation ? style.button_above : \"\"}`,\n        onClick: loginHandler,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.text,\n        children: \"Don\\u2019t have an account?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${style.login_btn} ${isAnimation ? style.button_below : \"\"}`,\n        onClick: toRegisterHandler,\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"kFJ8gR4auYUNOiD3D2rAHzUb7/E=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useEffect","useRef","useState","Cookies","logo","style","Input","Link","useNavigate","axios","config","decodeToken","jsxDEV","_jsxDEV","Login","_s","navigate","pressed","setPressed","isAnimation","setIsAnimation","fields","setFields","labels","error","setError","focusHandler","i","prev","slice","loginHandler","url","data","post","then","res","set","token","id","get","user_id","catch","err","console","log","response","message","toRegisterHandler","setTimeout","onClickOutsideHandler","length","className","login","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","title","create_text","inputs","onKeyDown","e","key","map","n","index","c","field","name","inputType","onClickOutside","input_wrapper","animation_input","opacity_input","type","placeholder","input","forgot_password","forgot_password_animation","href","buttons","buttons_animation","register_btn","button_above","onClick","text","login_btn","button_below","_c","$RefreshReg$"],"sources":["/Users/bohdanprokopchuk/Desktop/db/frontend/src/pages/login/Login.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport Cookies from 'js-cookie';\nimport logo from \"../../assets/logo.svg\"\nimport style from \"./login.module.scss\"\nimport Input from \"../../components/Input\";\nimport { Link,useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport config from \"../../config.json\"\nimport decodeToken from '../../utils/decodeToken'\nfunction Login() {\n    \n    const navigate = useNavigate()\n    const [pressed, setPressed] = useState([false, false, false])\n    const [isAnimation, setIsAnimation] = useState(false)\n    const [fields, setFields] = useState(['', ''])\n    const labels = [[\"Username or email\", 'text'], [\"Password\", 'password']];\n    const [error,setError] = useState('')\n    function focusHandler(i) {\n\n        setPressed(prev => {\n            prev[i] = true\n            return prev.slice(0)\n        });\n    }\n\n    function loginHandler(){\n        // const url = `http://${config.HOST}:${config.PORT}`\n        const url = `${config.url}/login`\n\n        const data = {\n            \"username\":fields[0],\n            \"password\":fields[1]\n        }\n        axios.post(url,data).then(res=>{\n            Cookies.set('token', res.data.token); // Expires in 30 days\n            \n            const id = decodeToken(Cookies.get('token')).user_id\n            navigate(`/chatroom/${id}`)\n        }).catch(err=>{\n            console.log(err.response.data.message)\n            setError(err.response.data.message)\n\n        })\n    }\n \n    function toRegisterHandler(){\n        setIsAnimation(true)\n        setTimeout(() => {\n            navigate(\"/register\")\n        }, 255);\n    }\n\n    function onClickOutsideHandler(i) {\n        if (fields[i].length == 0 && pressed[i]) setPressed(prev => { prev[i] = false; return prev.slice(0); });\n    }\n    useEffect(() => {\n        \n    }, [fields, pressed])\n    return (\n        <div className={style.login}>\n            <img src={logo} alt=\"\" className={style.logo} />\n\n            <h1 className={style.title}>Welcome back!</h1>\n            <div className={style.create_text}>Create an account or Log in</div>\n            <div className={style.inputs} onKeyDown={(e)=>{if(e.key===\"Enter\")loginHandler()}}>\n                {\n                    labels.map((n, i) =>\n                        <Input key={i} style={style} index={i} c={[fields, setFields]} isAnimation={isAnimation && i==1} field={fields} pressed={pressed} name={n[0]} inputType={n[1]} focusHandler={() => focusHandler(i)} onClickOutside={() => onClickOutsideHandler(i)} />\n                    )\n                }\n                <div className={`${style.input_wrapper} ${style.animation_input} ${isAnimation?style.opacity_input:\"\"}`} >\n                    <input type=\"text\" placeholder=\"Username\" className={style.input} />\n                </div>\n                \n                <div className={`${style.forgot_password} ${isAnimation?style.forgot_password_animation:\"\"}`}>\n                    <a href=\"/reset\">Forgot your password?</a>\n                    \n                </div>\n                <div className={style[\"errors\"]}>\n                    {error}\n                </div>\n            </div>\n            <div className={`${style.buttons} ${isAnimation?style.buttons_animation:\"\"}`}>\n                <button className={`${style.register_btn} ${isAnimation?style.button_above:\"\"}`} onClick={loginHandler}>\n                    Login\n                </button>\n                <div className={style.text}>\n                    Donâ€™t have an account?\n                </div>\n                \n                    <button className={`${style.login_btn} ${isAnimation?style.button_below:\"\"}`} onClick={toRegisterHandler}>\n                        Register\n                    </button>\n\n                \n            </div>\n        </div>\n    )\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}