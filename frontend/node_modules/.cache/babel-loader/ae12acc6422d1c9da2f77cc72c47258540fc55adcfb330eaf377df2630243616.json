{"ast":null,"code":"var _jsxFileName = \"/Users/bohdanprokopchuk/Desktop/db/frontend/src/pages/profile/Profile.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useRef, useState } from \"react\";\nimport config from '../../config.json';\nimport Cookies from 'js-cookie';\nimport decodeToken from \"../../utils/decodeToken.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const [picture, setPicture] = useState(\"\");\n  const token = decodeToken(Cookies.get('token'));\n  const [fname, setFname] = useState(token.first_name ? token.first_name : \"\");\n  const [lname, setLname] = useState(token.last_name ? token.last_name : \"\");\n  const [username, setUsername] = useState(token.username);\n  const [bio, setBio] = useState(token.bio ? token.bio : \"\");\n  const [phone, setPhone] = useState(token.phone_number ? token.phone_number : \"\");\n  useEffect(() => {\n    console.log(token);\n  }, []);\n  const convertToBase64 = file => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      setPicture(reader.result);\n    };\n    reader.onerror = error => {\n      console.error('Error converting file to base64:', error);\n    };\n  };\n  const handleFileChange = event => {\n    const file = event.target.files[0];\n    if (file) {\n      convertToBase64(file);\n    }\n  };\n  const saveHandler = () => {\n    const url = `${config.url}/profile`;\n    const data = {\n      'profile_picture': picture,\n      'first_name': fname == token.first_name ? \"\" : fname,\n      'last_name': lname == token.last_name ? \"\" : lname,\n      'username': username == token.username ? \"\" : username,\n      'bio': bio == token.bio ? \"\" : bio,\n      'phone_number': phone == token.phone_number ? \"\" : phone,\n      'token': Cookies.get('token')\n    };\n    axios.post(url, data).then(res => {\n      console.log(\"Good\");\n      console.log(decodeToken(res.data.token));\n      Cookies.set('token', res.data.token);\n    }).catch(err => console.log(\"what\"));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      className: \"picture\",\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"fname\",\n      value: fname,\n      onChange: e => {\n        setFname(e.target.value);\n      },\n      placeholder: \"First name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"lname\",\n      value: lname,\n      onChange: e => {\n        setLname(e.target.value);\n      },\n      placeholder: \"Last name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"username\",\n      value: username,\n      onChange: e => {\n        setUsername(e.target.value);\n      },\n      placeholder: \"Username\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"bio\",\n      value: bio,\n      onChange: e => {\n        setBio(e.target.value);\n      },\n      placeholder: \"Bio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"phone\",\n      value: phone,\n      onChange: e => {\n        setPhone(e.target.value);\n      },\n      placeholder: \"Phone number\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: saveHandler,\n      children: \"Save\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"3qJhamZsB1VYTI8x6ES77Sw94Vs=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["axios","useEffect","useRef","useState","config","Cookies","decodeToken","jsxDEV","_jsxDEV","Profile","_s","picture","setPicture","token","get","fname","setFname","first_name","lname","setLname","last_name","username","setUsername","bio","setBio","phone","setPhone","phone_number","console","log","convertToBase64","file","reader","FileReader","readAsDataURL","onloadend","result","onerror","error","handleFileChange","event","target","files","saveHandler","url","data","post","then","res","set","catch","err","className","children","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","value","e","placeholder","onClick","_c","$RefreshReg$"],"sources":["/Users/bohdanprokopchuk/Desktop/db/frontend/src/pages/profile/Profile.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useRef, useState } from \"react\";\nimport config from '../../config.json';\nimport Cookies from 'js-cookie';\nimport decodeToken from \"../../utils/decodeToken.js\";\nconst Profile = () => {\n        \n    const [picture,setPicture] = useState(\"\")\n    const token = decodeToken(Cookies.get('token'));\n    const [fname,setFname] = useState(token.first_name?token.first_name:\"\")\n    const [lname, setLname]= useState(token.last_name?token.last_name:\"\")\n    const [username, setUsername] = useState(token.username)\n    const [bio, setBio] = useState(token.bio?token.bio:\"\");\n    const [phone ,setPhone] = useState(token.phone_number?token.phone_number:\"\");\n    useEffect(()=>{\n       \n        console.log(token)\n        \n        \n    },[])\n    const convertToBase64 = (file) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onloadend = () => {\n            setPicture(reader.result);\n        };\n        reader.onerror = (error) => {\n            console.error('Error converting file to base64:', error);\n        };\n    };\n\n    \n    const handleFileChange = (event)=>{\n        const file = event.target.files[0];\n        if (file) {\n            convertToBase64(file);\n        }\n        \n\n    }\n    const saveHandler = ()=>{\n        \n        const url = `${config.url}/profile`\n        const data = {\n            'profile_picture': picture,\n            'first_name':fname==token.first_name?\"\":fname,\n            'last_name':lname==token.last_name?\"\":lname,\n            'username':username==token.username?\"\":username,\n            'bio':bio==token.bio?\"\": bio,\n            'phone_number':phone==token.phone_number?\"\":phone,\n            'token':Cookies.get('token')\n        }        \n        axios.post(url,data).then(res=>{\n            console.log(\"Good\")\n            console.log(decodeToken(res.data.token))\n\n            Cookies.set('token',res.data.token);\n        }).catch(err=>console.log(\"what\"))\n    }\n\n    return (\n        <div className=\"profile\">\n            <input type=\"file\" className=\"picture\" onChange={handleFileChange} />\n            <input type=\"text\" className=\"fname\"  value={fname} onChange={(e)=>{setFname(e.target.value)}} placeholder=\"First name\"/>\n            <input type=\"text\" className=\"lname\"  value={lname} onChange={(e)=>{setLname(e.target.value)}} placeholder=\"Last name\"/>\n            <input type=\"text\" className=\"username\"  value={username} onChange={(e)=>{setUsername(e.target.value)}} placeholder=\"Username\"/>\n            <input type=\"text\" className=\"bio\"  value={bio} onChange={(e)=>{setBio(e.target.value)}} placeholder=\"Bio\"/>\n            <input type=\"text\" className=\"phone\"  value={phone} onChange={(e)=>{setPhone(e.target.value)}} placeholder=\"Phone number\"/>\n\n            <button onClick={saveHandler}>Save</button>\n        </div>\n\n    )\n}\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}